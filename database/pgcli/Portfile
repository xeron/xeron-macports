# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4

PortSystem          1.0
PortGroup           python 1.0
PortGroup           github 1.0

github.setup        dbcli pgcli 1.3.1 v

categories          databases python
maintainers         gmail.com:xeron.oskom openmaintainer
license             BSD
platforms           darwin
supported_archs     noarch
description         Postgres CLI with autocompletion and syntax highlighting
long_description    ${description}

homepage            http://pgcli.com

checksums           rmd160  8a104551f6935d5942e2c10d9c40b1093e0a7dbb \
                    sha256  5176f9f9742ffdc6f3639dcf409a8f0e3f1bceab8f52bdb9e16d1d82a6c50a7f

depends_build       port:py${python.version}-setuptools
depends_lib-append  port:py${python.version}-pgspecial \
                    port:py${python.version}-click \
                    port:py${python.version}-pygments \
                    port:py${python.version}-prompt_toolkit \
                    port:py${python.version}-psycopg2 \
                    port:py${python.version}-sqlparse \
                    port:py${python.version}-configobj \
                    port:py${python.version}-setproctitle \
                    port:py${python.version}-humanize \
                    port:py${python.version}-wcwidth

variant python27 conflicts python34 python35 python36 description "Use Python 2.7" {}
variant python34 conflicts python27 python35 python36 description "Use Python 3.4" {}
variant python35 conflicts python27 python34 python36 description "Use Python 3.5" {}
variant python36 conflicts python27 python34 python35 description "Use Python 3.6" {}

if {[variant_isset python34]} {
    python.default_version 34
} elseif {[variant_isset python35]} {
    python.default_version 35
} elseif {[variant_isset python36]} {
    python.default_version 36
} else {
    default_variants +python27
    python.default_version 27
}

variant postgresql84 conflicts postgresql90 postgresql91 postgresql92 \
        postgresql93 postgresql94 postgresql95 postgresql96 \
        description "Build using postgresql v8.4" {
            depends_lib-append  port:postgresql84
}

variant postgresql90 conflicts postgresql84 postgresql91 postgresql92 \
        postgresql93 postgresql94 postgresql95 postgresql96 \
        description "Build using postgresql v9.0" {
            depends_lib-append  port:postgresql90
}

variant postgresql91 conflicts postgresql84 postgresql90 postgresql92 \
        postgresql93 postgresql94 postgresql95 postgresql96 \
        description "Build using postgresql v9.1" {
            depends_lib-append  port:postgresql91
}

variant postgresql92 conflicts postgresql84 postgresql90 postgresql91 \
        postgresql93 postgresql94 postgresql95 postgresql96 \
        description "Build using postgresql v9.2" {
            depends_lib-append  port:postgresql92
}

variant postgresql93 conflicts postgresql84 postgresql90 postgresql91 \
        postgresql92 postgresql94 postgresql95 postgresql96 \
        description "Build using postgresql v9.3" {
            depends_lib-append  port:postgresql93
}

variant postgresql94 conflicts postgresql84 postgresql90 postgresql91 \
        postgresql92 postgresql93 postgresql95 postgresql96 \
        description "Build using postgresql v9.4" {
            depends_lib-append  port:postgresql94
}

variant postgresql95 conflicts postgresql84 postgresql90 postgresql91 \
        postgresql92 postgresql93 postgresql94 postgresql96 \
        description "Build using postgresql v9.5" {
            depends_lib-append  port:postgresql95
}

variant postgresql96 conflicts postgresql84 postgresql90 postgresql91 \
        postgresql92 postgresql93 postgresql94 postgresql95 \
        description "Build using postgresql v9.6" {
            depends_lib-append  port:postgresql96
}

if {
    ![variant_isset postgresql84] && ![variant_isset postgresql90] &&
    ![variant_isset postgresql91] && ![variant_isset postgresql92] &&
    ![variant_isset postgresql93] && ![variant_isset postgresql94] &&
    ![variant_isset postgresql95] && ![variant_isset postgresql96]
} {
    default_variants    +postgresql96
}
