--- src/archives.c.orig	2014-01-15 08:50:28.000000000 +0400
+++ src/archives.c	2014-03-26 22:54:29.000000000 +0400
@@ -768,6 +768,7 @@
 {
   static struct varbuf conffderefn, symlinkfn;
   const char *usename;
+  char *s = NULL;
   struct filenamenode *usenode;
 
   struct conffile *conff;
@@ -827,7 +828,15 @@
     st = &ti->stat;
 
   usenode = namenodetouse(nifd->namenode, tc->pkg, &tc->pkg->available);
-  usename = usenode->name + 1; /* Skip the leading '/'. */
+  usename = usenode->name; /* Skip the leading '/' */
+  if (*usename == '.' && *usename + 1 == '/') {
+    usename += 1; /* Skip the leading `.' */
+  } else if (*usename != '/') {
+    s = malloc(strlen(usename) + 2); /* 1 for NULL, one for `/' we're going to add */
+    strcpy(s + 1, usename);
+    *s = '/';
+    usename = s;
+  }
 
   trig_file_activate(usenode, tc->pkg);
 
@@ -841,6 +850,10 @@
 
   setupfnamevbs(usename);
 
+  if (s != NULL) {
+    free(s);
+  }
+
   statr= lstat(fnamevb.buf,&stab);
   if (statr) {
     /* The lstat failed. */
